<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dr. Vinicius Minatogawa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
    </style>
</head>
<body class="bg-gradient-to-b from-gray-50 to-gray-100 text-gray-800">
    <div x-data="academicApp()" class="container mx-auto px-4 py-16 max-w-5xl">
        <header class="mb-16 text-center">
            <div class="mb-6">
                <img src="{{ url_for('static', filename='placeholder_profile.jpg') }}" alt="Dr. Vinicius Luiz Ferraz Minatogawa" class="rounded-full w-40 h-40 mx-auto shadow-lg border-4 border-white">
            </div>
            <h1 class="text-5xl font-bold text-gray-900 mb-3">Dr. Vinicius Minatogawa, PMP®</h1>
            <p class="text-2xl text-blue-700 mb-4">"Specialist in Digital Transformation Project Management"</p>
            <p class="text-lg text-gray-700 mb-4">Ph.D. in Mechanical Engineering, University of Campinas</p>
            <p class="mt-2 text-gray-700">Professor at PUCV in Chile</p>
            <p class="text-gray-700">PMP® Certified by PMI (PMP® Number: 3778535)</p>
            <div class="flex justify-center space-x-4 text-sm text-gray-600 mt-2">
                <a href="https://orcid.org/0000-0002-7441-7242" target="_blank" class="hover:text-blue-600 transition duration-300">ORCID: 0000-0002-7441-7242</a>
            </div>
        </header>

        <nav class="mb-12">
            <ul class="flex justify-center space-x-8 text-lg">
                <template x-for="tab in ['about', 'publications']">
                    <li>
                        <a @click="activeTab = tab" 
                           :class="{'text-blue-700 font-semibold border-b-2 border-blue-700': activeTab === tab}"
                           class="cursor-pointer hover:text-blue-700 transition duration-300 pb-2">
                            <span x-text="tab.charAt(0).toUpperCase() + tab.slice(1)"></span>
                        </a>
                    </li>
                </template>
            </ul>
        </nav>

        <main>
            <div x-show="activeTab === 'about'" class="bg-white p-10 rounded-3xl shadow-lg transition duration-500">
                <h2 class="text-4xl font-bold mb-6 text-gray-900">About Me</h2>
                <p class="mb-6 text-lg leading-relaxed">
                    I am an Associate Professor and Researcher with a Ph.D. in Mechanical Engineering and a certified Project Management Professional (PMP®). With over a decade of experience bridging academia and industry, I specialize in leading digital transformation initiatives and managing innovation projects. My work focuses on integrating advanced technologies and data-driven methodologies to drive organizational change and foster sustainable growth.
                </p>
                <p class="text-lg font-semibold text-gray-700">
                    <span class="text-blue-700">PMP® Number:</span> 3778535
                </p>
            </div>

            <div x-show="activeTab === 'publications'" class="bg-white p-10 rounded-3xl shadow-lg transition duration-500">
                <h2 class="text-4xl font-bold mb-8 text-gray-900">Publications</h2>
                <div class="mb-6">
                    <input x-model="search" type="text" placeholder="Search publications..." class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent">
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-blue-100">
                            <tr>
                                <template x-for="header in headers">
                                    <th @click="sort(header)" class="p-4 text-left text-gray-700 cursor-pointer hover:bg-blue-200 transition duration-300">
                                        <span x-text="header"></span>
                                        <span x-show="sortColumn === header" class="ml-1">
                                            <template x-if="sortDirection === 'asc'">▲</template>
                                            <template x-if="sortDirection === 'desc'">▼</template>
                                        </span>
                                    </th>
                                </template>
                            </tr>
                        </thead>
                        <tbody>
                            <template x-for="pub in filteredPublications" :key="pub.DOI">
                                <tr class="border-b border-gray-200 hover:bg-blue-50 transition duration-300">
                                    <td class="p-4">
                                        <a :href="'https://doi.org/' + pub.DOI" target="_blank" class="text-blue-600 hover:underline" x-text="pub.Title"></a>
                                    </td>
                                    <td class="p-4" x-text="pub.Journal"></td>
                                    <td class="p-4" x-text="pub.Year"></td>
                                    <td class="p-4" x-text="pub.Citations"></td>
                                </tr>
                            </template>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <script>
        function academicApp() {
            return {
                activeTab: 'about',
                publications: {{ publications|tojson|safe }},
                headers: ['Title', 'Journal', 'Year', 'Citations'],
                search: '',
                sortColumn: 'Citations',
                sortDirection: 'desc',
                // Ensure all properties are correctly defined
                get filteredPublications() {
                    let filtered = this.publications;
                    if (this.search) {
                        const searchLower = this.search.toLowerCase();
                        filtered = filtered.filter(pub => 
                            Object.values(pub).some(value => 
                                value.toString().toLowerCase().includes(searchLower)
                            )
                        );
                    }
                    
                    filtered.sort((a, b) => {
                        let aValue = a[this.sortColumn];
                        let bValue = b[this.sortColumn];
                        if (this.sortColumn === 'Year' || this.sortColumn === 'Citations') {
                            aValue = parseInt(aValue);
                            bValue = parseInt(bValue);
                        }
                        if (aValue < bValue) return this.sortDirection === 'asc' ? -1 : 1;
                        if (aValue > bValue) return this.sortDirection === 'asc' ? 1 : -1;
                        return 0;
                    });
                    
                    return filtered;
                },

                sort(column) {
                    if (this.sortColumn === column) {
                        this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';
                    } else {
                        this.sortColumn = column;
                        this.sortDirection = 'desc';
                    }
                }
            };
        }
    </script>
</body>
</html>
